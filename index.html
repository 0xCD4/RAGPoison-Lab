<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="RAGShadowMaster CTF - RAG sistemlerini zehirleyerek AI güvenliğini öğrenin. 9 challenge, 3 zorluk seviyesi.">
    <meta name="theme-color" content="#0a0e17">
    <title>RAGShadowMaster CTF | AI Security Platform</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loader-content">
            <div class="loader-icon">
                <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                    <circle cx="24" cy="24" r="20" stroke="url(#loaderGrad)" stroke-width="3" stroke-dasharray="8 6"
                        class="loader-ring" />
                    <circle cx="24" cy="24" r="10" stroke="url(#loaderGrad)" stroke-width="2" stroke-dasharray="4 4"
                        class="loader-ring-inner" />
                    <defs>
                        <linearGradient id="loaderGrad" x1="0" y1="0" x2="48" y2="48">
                            <stop stop-color="#06b6d4" />
                            <stop offset="1" stop-color="#8b5cf6" />
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <p class="loader-text">RAGShadowMaster başlatılıyor<span class="loader-dots"></span></p>
        </div>
    </div>

    <!-- Background Effects -->
    <canvas id="particleCanvas" class="particle-canvas"></canvas>
    <div class="bg-glow bg-glow-1"></div>
    <div class="bg-glow bg-glow-2"></div>
    <div class="bg-glow bg-glow-3"></div>

    <div id="app">
        <!-- Header / Navbar -->
        <header id="mainHeader">
            <nav class="nav-inner">
                <div class="header-left">
                    <div class="brand-row">
                        <div class="brand-icon">
                            <svg width="28" height="28" viewBox="0 0 28 28" fill="none">
                                <path d="M14 2L26 8v12l-12 6L2 20V8l12-6z" stroke="url(#brandGrad)" stroke-width="1.5"
                                    fill="none" />
                                <circle cx="14" cy="14" r="5" fill="url(#brandGrad)" opacity="0.3" />
                                <circle cx="14" cy="14" r="2.5" fill="url(#brandGrad)" />
                                <defs>
                                    <linearGradient id="brandGrad" x1="2" y1="2" x2="26" y2="26">
                                        <stop stop-color="#10b981" />
                                        <stop offset="1" stop-color="#06b6d4" />
                                    </linearGradient>
                                </defs>
                            </svg>
                        </div>
                        <div>
                            <h1>RAGShadowMaster</h1>
                            <span class="subtitle">AI Güvenlik CTF Platformu</span>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <div class="stat-pill" id="scoreDisplay">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polygon
                                points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                        </svg>
                        <span>Puan: 0</span>
                    </div>
                    <div class="stat-pill stat-flags" id="flagsCount">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z" />
                            <line x1="4" y1="22" x2="4" y2="15" />
                        </svg>
                        <span>Flag: 0/9</span>
                    </div>
                </div>
            </nav>
        </header>

        <main>
            <!-- ===== WELCOME SCREEN ===== -->
            <div id="welcomeScreen" class="screen active">
                <div class="welcome-hero">
                    <div class="hero-badge">
                        <span class="badge-dot"></span>
                        <span>Eğitim Amaçlı Güvenlik Simülasyonu</span>
                    </div>
                    <h2 class="hero-title">
                        RAG Sistemlerini <span class="gradient-text">Zehirle</span>,<br>
                        AI Güvenliğini <span class="gradient-text">Öğren</span>.
                    </h2>
                    <p class="hero-desc">
                        RAG (Retrieval-Augmented Generation) sistemleri, kurumsal bilgi tabanlarından veri çekerek
                        LLM'lere bağlam sağlar.
                        Bu CTF platformunda bu sistemlerin nasıl manipüle edilebileceğini 9 gerçekçi senaryo ile
                        öğreneceksiniz.
                    </p>
                </div>

                <section class="hero-strip">
                    <div class="hero-card">
                        <div class="hero-card-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                            </svg>
                        </div>
                        <div>
                            <span class="hero-label">Saldırı Simülasyonu</span>
                            <strong>RAG Poisoning Lab</strong>
                        </div>
                    </div>
                    <div class="hero-card">
                        <div class="hero-card-icon icon-purple">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                            </svg>
                        </div>
                        <div>
                            <span class="hero-label">Zorluk</span>
                            <strong>9 CTF Challenge</strong>
                        </div>
                    </div>
                    <div class="hero-card">
                        <div class="hero-card-icon icon-red">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                <circle cx="12" cy="12" r="3" />
                            </svg>
                        </div>
                        <div>
                            <span class="hero-label">Odak</span>
                            <strong>Stealth + Forensics</strong>
                        </div>
                    </div>
                </section>

                <div class="terminal-box">
                    <div class="terminal-header">
                        <div class="terminal-dots">
                            <span class="terminal-dot red"></span>
                            <span class="terminal-dot yellow"></span>
                            <span class="terminal-dot green"></span>
                        </div>
                        <span class="terminal-title">ragshadowmaster@ctf:~$</span>
                    </div>
                    <div class="terminal-body">
                        <p class="typed-text">$ ragshadowmaster --init</p>
                        <p class="terminal-response">Hoş geldiniz. Ben <span class="text-green">RAGShadowMaster</span>.
                        </p>
                        <p class="terminal-response">Bu CTF'de RAG sistemlerini zehirleyerek ödülleri ele
                            geçireceksiniz.</p>
                        <br>
                        <p class="text-cyan">Seviyenizi seçin:</p>
                        <br>
                        <div class="level-cards">
                            <div class="level-card easy" onclick="game.selectLevel('easy')" id="levelCardEasy">
                                <div class="level-number-box easy-box">
                                    <span>01</span>
                                </div>
                                <div class="level-info">
                                    <h3>Kolay <span class="level-tag easy-tag">BAŞLANGIÇ</span></h3>
                                    <p>Basit HR sohbet botu</p>
                                    <span class="level-detail">İzin politikası manipülasyonu</span>
                                </div>
                                <div class="level-challenges">3 Challenge →</div>
                            </div>
                            <div class="level-card medium" onclick="game.selectLevel('medium')" id="levelCardMedium">
                                <div class="level-number-box medium-box">
                                    <span>02</span>
                                </div>
                                <div class="level-info">
                                    <h3>Orta <span class="level-tag medium-tag">KURUMSAL</span></h3>
                                    <p>Microsoft 365 Copilot</p>
                                    <span class="level-detail">CEO bilgisi yanıltma</span>
                                </div>
                                <div class="level-challenges">3 Challenge →</div>
                            </div>
                            <div class="level-card hard" onclick="game.selectLevel('hard')" id="levelCardHard">
                                <div class="level-number-box hard-box">
                                    <span>03</span>
                                </div>
                                <div class="level-info">
                                    <h3>Zor <span class="level-tag hard-tag">UZMAN</span></h3>
                                    <p>Agentik AI Memory</p>
                                    <span class="level-detail">Kalıcı davranış zehirlemesi</span>
                                </div>
                                <div class="level-challenges">3 Challenge →</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Academic References -->
                <div class="ref-strip">
                    <span class="ref-label">Akademik Temel:</span>
                    <span class="ref-item">PoisonedRAG (USENIX '25)</span>
                    <span class="ref-dot">·</span>
                    <span class="ref-item">CorruptRAG</span>
                    <span class="ref-dot">·</span>
                    <span class="ref-item">RAGForensics</span>
                    <span class="ref-dot">·</span>
                    <span class="ref-item">RevPRAG (EMNLP '25)</span>
                </div>
            </div>

            <!-- ===== CHALLENGE SCREEN ===== -->
            <div id="challengeScreen" class="screen">
                <!-- Progress Bar -->
                <div class="progress-strip">
                    <div class="progress-info">
                        <span id="challengeLevel" class="level-badge">KOLAY</span>
                        <span id="challengeNumber" class="challenge-num">Challenge 1/3</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 33%"></div>
                    </div>
                </div>

                <div class="challenge-layout">
                    <!-- Left Panel: Challenge Info -->
                    <div class="panel challenge-panel">
                        <div class="panel-label">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="10" />
                                <path d="M12 16v-4M12 8h.01" />
                            </svg>
                            Görev Bilgisi
                        </div>
                        <h2 id="challengeTitle"></h2>
                        <div id="challengeDescription" class="challenge-desc"></div>

                        <div class="system-info">
                            <h4>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="2" y="3" width="20" height="14" rx="2" />
                                    <line x1="8" y1="21" x2="16" y2="21" />
                                    <line x1="12" y1="17" x2="12" y2="21" />
                                </svg>
                                Hedef Sistem
                            </h4>
                            <div id="systemInfo" class="info-block"></div>
                        </div>

                        <div class="knowledge-base">
                            <h4>
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
                                </svg>
                                Mevcut Bilgi Tabanı (Knowledge Base)
                            </h4>
                            <div id="knowledgeBase" class="kb-block"></div>
                        </div>

                        <div class="hint-section">
                            <button id="hintBtn" class="btn btn-hint" onclick="game.showHint()">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <circle cx="12" cy="12" r="10" />
                                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
                                    <line x1="12" y1="17" x2="12.01" y2="17" />
                                </svg>
                                İpucu Göster (-25 puan)
                            </button>
                            <div id="hintText" class="hint-text hidden"></div>
                        </div>
                    </div>

                    <!-- Right Panel: Attack Interface -->
                    <div class="panel attack-panel">
                        <div class="panel-label panel-label-red">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                            </svg>
                            Saldırı Arayüzü
                        </div>
                        <h3 class="attack-title">Zehirli Belge / Chunk Enjeksiyonu</h3>
                        <p class="attack-instruction" id="attackInstruction">Aşağıya zehirlenecek belge içeriğini yazın:
                        </p>
                        <p class="attack-instruction" id="challengeStats"></p>

                        <div class="input-group">
                            <label for="docTitle">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <polyline points="14 2 14 8 20 8" />
                                </svg>
                                Belge Başlığı
                            </label>
                            <input type="text" id="docTitle" placeholder="örnek: HR_Politikası_2026_v3.docx">
                        </div>

                        <div class="input-group">
                            <label for="poisonContent">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                                </svg>
                                Zehir İçeriği
                            </label>
                            <textarea id="poisonContent" rows="10"
                                placeholder="Zehirlenecek belge içeriğini buraya yazın..."></textarea>
                        </div>

                        <button class="btn btn-attack" onclick="game.submitAttack()" id="attackBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
                            </svg>
                            Saldırıyı Çalıştır
                        </button>

                        <!-- Results Area -->
                        <div id="resultsArea" class="results hidden">
                            <div class="result-header">
                                <h4>
                                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                                        <polyline points="22 4 12 14.01 9 11.01" />
                                    </svg>
                                    Simülasyon Sonuçları
                                </h4>
                            </div>
                            <div id="retrievalResults" class="result-section"></div>
                            <div id="llmResponse" class="result-section"></div>
                            <div id="detectionResult" class="result-section"></div>
                            <div id="flagResult" class="result-section"></div>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="challenge-nav">
                    <button class="btn btn-secondary" onclick="game.backToMenu()" id="backMenuBtn">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="19" y1="12" x2="5" y2="12" />
                            <polyline points="12 19 5 12 12 5" />
                        </svg>
                        Ana Menü
                    </button>
                    <button class="btn btn-primary" id="nextChallengeBtn" onclick="game.nextChallenge()" disabled>
                        Sonraki Challenge
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="5" y1="12" x2="19" y2="12" />
                            <polyline points="12 5 19 12 12 19" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- ===== SCOREBOARD SCREEN ===== -->
            <div id="scoreboardScreen" class="screen">
                <div class="scoreboard-wrapper">
                    <div class="terminal-box wide">
                        <div class="terminal-header">
                            <div class="terminal-dots">
                                <span class="terminal-dot red"></span>
                                <span class="terminal-dot yellow"></span>
                                <span class="terminal-dot green"></span>
                            </div>
                            <span class="terminal-title">Sonuçlar</span>
                        </div>
                        <div class="terminal-body scoreboard-body">
                            <div class="rank-badge-wrapper">
                                <div class="rank-badge" id="rankBadge">
                                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="1">
                                        <polygon
                                            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                                    </svg>
                                </div>
                            </div>
                            <h2 id="finalRank"></h2>
                            <div id="finalScore" class="final-score"></div>
                            <div id="globalStatsSummary" class="rank-desc"></div>
                            <div id="flagsList" class="flags-list"></div>
                            <div id="rankDescription" class="rank-desc"></div>
                            <br>
                            <button class="btn btn-primary btn-lg" onclick="game.restart()" id="restartBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="23 4 23 10 17 10" />
                                    <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                                </svg>
                                Tekrar Oyna
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-inner">
                <span>RAGShadowMaster CTF</span>
                <span class="footer-dot">·</span>
                <span>Eğitim amaçlı AI güvenlik simülasyonu</span>
                <span class="footer-dot">·</span>
                <span>2026</span>
            </div>
        </footer>
    </div>

    <script src="challenges.js"></script>
    <script src="engine.js"></script>
    <script src="game.js"></script>
</body>

</html>